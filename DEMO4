*************************************
*                                   *
*  THIS PROGRAM READS INPUT CARDS,  *
*  EACH WITH A PART # AND QUANTITY  *
*  IN STOCK.  IT THEN READS         *
*  REQUESTS CONTAINING PART         *
*  NUMBERS AND PRINTS A REPORT      *
*  OF HOW MANY UNITS ARE IN STOCK.  *
*                                   *
*  THE INPUT SET MUST CONTAIN:      *
*                                   *
*       -  A MASTER SET WHERE EACH  *
*           LINE CONTAINS 2 NON-    *
*           NEGATIVE NUMBERS        *
*           SEPARATED BY ONE OR     *
*          MORE BLANKS:             *
*               -  A PART NUMBER    *
*               -  STOCK QUANTITY OF*
*                  THE PART         *
*       -  A LINE WITH A -1         *
*       -  REQUEST LINES:           *
*               -  EACH CONTAINING  *
*                 ONE PART NUMBER   *
*                                   *
*************************************
	SPACE
STOCK	CSECT
R0	EQU	0
R1	EQU	1
R2	EQU	2
R3	EQU	3
R4	EQU	4
R5	EQU	5
R6	EQU	6
R7	EQU	7
R8	EQU	8
R9	EQU	9
R10	EQU	10
R11	EQU	11
R12	EQU	12
R13	EQU	13
R14	EQU	14
R15	EQU	15
	SPACE
	USING *,R15
*
**<1>**	INITIALIZE POINTER TO TABLE
*	AND ITEMS TO 25.
*
	LA	R3,TABLE
	LA	R4,25
*
*
**<2>**	READ A CARD, BRANCH ON ERROR
*
ANOTHER	XREAD	CARD,79
	BC	B'0100',INP$ERR
*
*
**<3>**	GET A PART #, BRANCH AT END
*
	XDECI	R5,CARD
	C	R5,=F'-1'
	BC	B'1000',DISPLAY	GO DISPLAY THE PAGE HEADER AT END
*
*
**<4>**	BUILD A TABLE ENTRY
*
	ST	R5,0(R3)	MOVE PART # INTO TABLE
	XDECI	R5,0(R1)	GET THE QUANTITY
	ST	R5,4(R3)		AND PUT INTO TABLE
	LA	R3,8(R3)	POINT TO NEXT TABLE ENTRY
*
*
**<5>**	GO GET ANOTHER ENTRY
*
	BCT	R4,ANOTHER
*
*
**<6>**	DISPLAY THE REPORT PAGE HEADER
*
DISPLAY	XPRNT =C'1        INVENTORY INFORMATION REPORT',37
	XPRNT =C'0       ITEM #          UNITS IN STOCK',38
	XPRNT =C'        ======          ==============',38
*
*
**<7>**	SET UP SEARCH LOOP CONSTANTS
	LR	R7,R3
	S	R7,=F'8'	POINT TO LAST TABLE ENTRY
	LA	R6,8	SET INDEX INCREMENT
*
*
**<8>**	READ REQUEST CARDS UNTIL EOF
*
MORE	XREAD CARD,79
	BC	B'0100',EXIT
	XDECI	R8,CARD	GET REQUEST PART NUMBER
*
*
**<8>**	INITIALIZE TABLE LOOKUP
*
	LA	R3,TABLE
*
*
**<9>**	SEARCH TABLE FOR REQUEST
*
SEARCH	C	R8,0(R3)
	BC	B'1000',FOUND
*
*
**<10>**	ADVANCE PIONTER & SEARCH MORE
*
	BXLE	R3,R6,SEARCH
*
*
**<11>** PRINT ERROR MSG WHEN NOT FOUND
*
NOTFOUND	XDECO	R8,ELINE+1
	XPRNT ELINE,56
	BC	B'1111',MORE
*
*
**<12>** PRINT A REPORT LINE
*
FOUND	XDECO	R8,PLINE+1
	L	R8,4(R3)
	XDECO	R8,PLINE+20
	XPRNT	PLINE,32
	BC	B'1111',MORE	GO GET NEXT REQUEST
*
*
**<13>**	PRINT INPUT ERROR MSG
*
INP$ERR	XPRNT	=C'1  IMPROPER ALIGNMENT OF DATA CARDS WAS DETECTED',49
*
*
**<14>**	EXIT PROGRAM
EXIT	XPRNT	=C'1',1	SET PRINTER TO CLEAN PAGE
	BCR	B'1111',R14
	LTORG
	SPACE
	DC	C'0'
CARD	DS	CL80
	DS	0F
TABLE	DC	50XL4'DEADDEAD'
PLINE	DC	CL32'0 '
ELINE	DC	CL20'0 '
	DC	CL36'NO ENTRY FOUND. PROBABLE USER ERROR'
	END STOCK
$ENTRY
572	28
1644	5
1277	177
-1
1277
100
1644
572
